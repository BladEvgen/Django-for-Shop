{% extends "components/base.html" %}
{% load django_app_filters_and_tags %}
{% load static %}

{% block main %}
<div class="container mt-5">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <h2 class="text-center text-primary mb-4">üéâ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
    <div class="alert alert-success text-center" role="alert">
        <p class="mb-0">–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∑–∞–∫–∞–∑! –í–∞—à–∞ –ø–æ–∫—É–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.</p>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –∑–∞–∫–∞–∑–∞ -->
    <div class="card mt-4 shadow-sm border-0">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">üìú –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞</h4>
        </div>
        <div class="card-body">
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="mb-3">
                <p><strong>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</strong> {{ order.id }}</p>
                <p><strong>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</strong> {{ order.date_created|date:"d F, Y H:i" }}</p>
                <p><strong>–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞:</strong> 
                    <span class="badge bg-success">{{ order.status }}</span>
                </p>
            </div>

            <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <h5 class="text-primary">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h5>
            <ul class="list-group list-group-flush mb-4">
                <li class="list-group-item"><strong>–§–∞–º–∏–ª–∏—è:</strong> {{ order.user.last_name }}</li>
                <li class="list-group-item"><strong>–ò–º—è:</strong> {{ order.user.first_name }}</li>
                <li class="list-group-item"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ order.user.profile.phonenumber }}</li>
                <li class="list-group-item"><strong>–ê–¥—Ä–µ—Å:</strong> {{ order.user.profile.address }}</li>
            </ul>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö -->
            <h5 class="text-primary">üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö:</h5>
            <div class="table-responsive">
                <table class="table table-bordered table-hover mt-3">
                    <thead class="table-light">
                        <tr>
                            <th>–¢–æ–≤–∞—Ä</th>
                            <th class="text-center">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                            <th class="text-center">–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É</th>
                            <th class="text-center">–û–±—â–∞—è —Ü–µ–Ω–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order_item in order.order_items.all %}
                        <tr>
                            <td>{{ order_item.item.title }}</td>
                            <td class="text-center">{{ order_item.quantity }} —à—Ç</td>
                            <td class="text-center">
                                {{ order_item.item.discounted_price|default:order_item.item.price }} ‚Ç∏
                            </td>
                            <td class="text-center">{{ order_item.calculate_item_total }} ‚Ç∏</td>
                        </tr>
                        {% endfor %}
                        <tr class="table-secondary">
                            <td colspan="3" class="text-end"><strong>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</strong></td>
                            <td class="text-center"><strong>{{ order.get_total_price }} ‚Ç∏</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç—É–ª—Ç–∏–ø–æ–≤ -->
<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>

<!-- –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è -->
<style>
    .card-header {
        font-size: 1.25rem;
        font-weight: bold;
    }

    .table th, .table td {
        vertical-align: middle;
    }

    .badge {
        font-size: 1rem;
        padding: 0.5em 0.75em;
    }
</style>
{% endblock %}
